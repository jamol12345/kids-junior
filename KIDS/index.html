<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Savollar</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: #f3f7f9;
      color: #333;
      padding: 20px;
    }

    header {
      text-align: center;
      margin-bottom: 30px;
    }

    header h1 {
      font-size: 2.5rem;
      color: #2c3e50;
    }

    main {
      max-width: 900px;
      margin: auto;
      display: flex;
      flex-direction: column;
      gap: 30px;
    }

    .card {
      background: #ffffff;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .images-container {
      display: flex;
      justify-content: space-between;
      gap: 15px;
      margin: 15px 0;
    }

    .card img {
      flex: 1;
      max-width: 100%;
      height: 400px;
      border-radius: 8px;
      border: 2px solid #e0e0e0;
      transition: transform 0.3s ease;
    }

    .card img:hover {
      transform: scale(1.05);
    }

    .answer_card {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-top: 10px;
    }

    .answer_card button {
      flex: 1;
      padding: 12px 20px;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      background-color: #3498db;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
      min-width: 0;
    }

    .answer_card button:hover:not(:disabled) {
      background-color: #2980b9;
      transform: scale(1.05);
    }

    .answer_card button:disabled {
      cursor: not-allowed;
      opacity: 0.7;
    }

    .correct { background-color: #2ecc71 !important; }
    .error { background-color: #e74c3c !important; }

    .end {
      display: block;
      margin: 40px auto;
      padding: 14px 28px;
      font-size: 1.1rem;
      background-color: #27ae60;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    .end:hover {
      background-color: #219150;
      transform: scale(1.05);
    }

    .end:active{
      background-color: #2ecc71;
    }

    /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ */
    .result-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .result-content {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 50px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      max-width: 500px;
      width: 90%;
      animation: modalAppear 0.5s ease-out;
    }

    .success-modal .result-content {
      background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    }

    .fail-modal .result-content {
      background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
    }

    @keyframes modalAppear {
      from {
        opacity: 0;
        transform: scale(0.7);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .result-title {
      font-size: 2.5rem;
      margin-bottom: 20px;
      font-weight: bold;
    }

    .result-message {
      font-size: 1.3rem;
      margin-bottom: 30px;
      line-height: 1.6;
    }

    .result-score {
      font-size: 1.8rem;
      margin-bottom: 30px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      backdrop-filter: blur(10px);
    }

    .restart-btn {
      padding: 15px 30px;
      font-size: 1.1rem;
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
    }

    .restart-btn:hover {
      background: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }

      header h1 {
        font-size: 2rem;
      }

      .card {
        padding: 15px;
      }

      .images-container {
        flex-direction: column;
        gap: 10px;
      }

      .card img {
        height: 90px;
      }

      .answer_card {
        flex-direction: column;
        gap: 10px;
      }

      .answer_card button {
        padding: 15px;
        font-size: 1rem;
      }

      .result-content {
        padding: 30px 20px;
      }

      .result-title {
        font-size: 2rem;
      }

      .result-message {
        font-size: 1.1rem;
      }

      .result-score {
        font-size: 1.5rem;
      }
    }

    @media (max-width: 480px) {
      header h1 {
        font-size: 1.8rem;
      }

      .card {
        padding: 12px;
      }

      .card img {
        height: 80px;
      }

      .answer_card button {
        padding: 12px;
        font-size: 0.9rem;
      }

      .end {
        padding: 12px 24px;
        font-size: 1rem;
      }

      .result-content {
        padding: 25px 15px;
      }

      .result-title {
        font-size: 1.8rem;
      }

      .result-message {
        font-size: 1rem;
      }

      .result-score {
        font-size: 1.3rem;
        padding: 12px;
      }
    }
  </style>
</head>
<body>
  <header><h1>Savollar</h1></header>
  <main>
    <div class="card">
      <h1>1-savol</h1>
      <p>Kompyuterda matn yozish uchun nima kerak?</p>
      <div class="images-container">
        <img src="../public/notebook.webp" />
        <img src="../public/keyboard.webp" />
        <img src="../public/pen.webp" />
      </div>
      <div class="answer_card" id="savol_1">
        <button>Daftar</button>
        <button>Klaviatura</button>
        <button>Ruchka</button>
      </div>
    </div>
    
    <div class="card">
      <h1>2-savol</h1>
      <p>Berilgan rasmlardan qaysi biri "noutbuk" deb ataladi?</p>
      <div class="images-container">
        <img src="../public/doll.webp" />
        <img src="../public/laptop.webp" />
        <img src="../public/pc.webp" />
      </div>
      <div class="answer_card" id="savol_3">
        <button>1</button>
        <button>2</button>
        <button>3</button>
      </div>
    </div>

    <div class="card">
      <h1>3-savol</h1>
      <p>Quyidagilardan qaysi biri kompyuterga tegishli?</p>
      <div class="images-container">
        <img src="../public/sheet.webp" />
        <img src="../public/mouse.webp" />
        <img src="../public/toy.webp" />
      </div>
      <div class="answer_card" id="savol_2">
        <button>Daftar varog'i</button>
        <button>Sichqoncha</button>
        <button>Qo'g'irchoq</button>
      </div>
    </div>

    <div class="card">
      <h1>4-savol</h1>
      <p>Qaysi biri ortiqcha?</p>
      <div class="images-container">
        <img src="../public/pc.webp" />
        <img src="../public/phone.webp" />
        <img src="../public/rabbit.webp" />
      </div>
      <div class="answer_card" id="savol_4">
        <button>Kompyuter</button>
        <button>Telefon</button>
        <button>Quyon</button>
      </div>
    </div>

    <div class="card">
      <h1>5-savol</h1>
      <p>Musiqa eshitish uchun bizga nima kerak bo'ladi?</p>
      <div class="images-container">
        <img src="/public/pc2.webp" />
        <img src="/public/keyboard.webp" />
        <img src="/public/headphone.webp" />
      </div>
      <div class="answer_card" id="savol_5">
        <button>Kompyuter</button>
        <button>Klaviatura</button>
        <button>Quloqchin</button>
      </div>
      </div>
      <button class="end" id="end">Yakunlash</button>

<!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
<div class="result-modal success-modal" id="successModal">
  <div class="result-content">
    <div class="result-title">üéâ Tabriklaymiz! üéâ</div>
    <div class="result-message">Siz testni muvaffaqiyatli yakunladingiz!</div>
    <div class="result-score" id="successScore"></div>
    <button class="restart-btn" onclick="closeModal()">Tasdiqlash</button>
  </div>
</div>

<div class="result-modal fail-modal" id="failModal">
  <div class="result-content">
    <div class="result-title">üòî Afsus...</div>
    <div class="result-message">Testni yecha olmadingiz,<br>boshqa safar omadingiz keladi!</div>
    <div class="result-score" id="failScore"></div>
    <button class="restart-btn" onclick="closeModal()">Tasdiqlash</button>
  </div>
</div>

<script>
  const correctAnswerIndices = new Map([
    ['savol_1', 1],
    ['savol_2', 1],
    ['savol_3', 1],
    ['savol_4', 2],
    ['savol_5', 2],
  ]);

  const userAnswers = new Map();

  function createSound(frequency, duration, type = 'sine') {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const oscillator = audioContext.createOscillator();
    const gainNode = audioContext.createGain();

    oscillator.connect(gainNode);
    gainNode.connect(audioContext.destination);

    oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
    oscillator.type = type;

    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);

    oscillator.start(audioContext.currentTime);
    oscillator.stop(audioContext.currentTime + duration);
  }

  function playCorrectSound() {
    try {
      createSound(523.25, 0.2);
      setTimeout(() => createSound(659.25, 0.2), 100);
    } catch (e) {
      console.log('–ó–≤—É–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω');
    }
  }

  function playIncorrectSound() {
    try {
      createSound(220, 0.3, 'triangle');
    } catch (e) {
      console.log('–ó–≤—É–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω');
    }
  }

  function playApplauseSound() {
    try {
      const frequencies = [440, 523, 659, 784, 880];
      frequencies.forEach((freq, index) => {
        setTimeout(() => {
          createSound(freq, 0.1, 'square');
          createSound(freq * 1.5, 0.05, 'triangle');
        }, index * 100);
      });
    } catch (e) {
      console.log('–ó–≤—É–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω');
    }
  }

  function playOopsSound() {
    try {
      createSound(330, 0.4, 'sine');
      setTimeout(() => createSound(220, 0.6, 'sine'), 200);
    } catch (e) {
      console.log('–ó–≤—É–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω');
    }
  }

  correctAnswerIndices.forEach((correctIndex, qid) => {
    const buttons = document.querySelectorAll(`#${qid} button`);
    buttons.forEach((btn, index) => {
      btn.addEventListener('click', () => {
        if (userAnswers.has(qid)) return;

        buttons.forEach(b => b.disabled = true);

        if (index === correctIndex) {
          btn.classList.add('correct');
          userAnswers.set(qid, true);
          playCorrectSound();
        } else {
          btn.classList.add('error');
          userAnswers.set(qid, false);
          playIncorrectSound();
        }
      });
    });
  });

  document.getElementById('end').addEventListener('click', () => {
    let totalCorrect = 0;
    userAnswers.forEach(val => { if (val === true) totalCorrect++; });

    const scoreText = `To'g'ri javoblar soni: ${totalCorrect} / 5`;

    if (totalCorrect >= 4) {
      document.getElementById('successScore').textContent = scoreText;
      document.getElementById('successModal').style.display = 'flex';
      playApplauseSound();
    } else {
      document.getElementById('failScore').textContent = scoreText;
      document.getElementById('failModal').style.display = 'flex';
      playOopsSound();
    }
  });

  function closeModal() {
    document.getElementById('successModal').style.display = 'none';
    document.getElementById('failModal').style.display = 'none';
  }

  document.querySelectorAll('.result-modal').forEach(modal => {
    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeModal();
    });
  });
</script>
